// Variables
$color-background: #f8f9fa;
$color-border: #6c757d;
$color-text: #495057;
$color-code-bg: #f5f5f5;
$border-radius: 4px;
$spacing-unit: 0.5rem;

/* Custom styles for query document */

/* Header styling */
h3 {
}

h4 {
  font-variant: small-caps;
  font-weight: 600;
  letter-spacing: 0.05em;
}

/* Details tag styling */
details {
  margin: $spacing-unit * 2 0;
  padding: $spacing-unit;
  background-color: $color-background;
  border-left: 4px solid $color-border;
  border-radius: $border-radius;
  overflow-wrap: break-word;   /* Ensure long words break */
  word-wrap: break-word;       /* Legacy support */
  max-width: 100%;             /* Ensure content doesn't exceed container */

  &[open] {
    summary {
      margin-bottom: $spacing-unit;
    }
  }

  // Code block styling inside details
  // Inherits base pre styling below
  pre {
    margin-top: $spacing-unit;
    margin-bottom: $spacing-unit;
    padding: $spacing-unit * 1.5;
    border-radius: $border-radius;
    background-color: $color-code-bg;
    white-space: pre-wrap;     /* Allow wrapping while preserving whitespace */
    overflow-x: hidden;        /* Hide horizontal scrollbar */
    width: 100%;               /* Ensure content fits within container */
  }
  
  // Ensure code within details wraps properly
  code {
    white-space: pre-wrap;
    word-break: normal;
    overflow-wrap: break-word;
  }
}

summary {
  cursor: pointer;
  font-weight: 600;
  color: $color-text;
}

/* Base code wrapping for preformatted text and code elements */
pre,
code {
  white-space: pre-wrap;       /* Allow wrapping, preserving whitespace */
  word-wrap: break-word;       /* Legacy fallback for breaking long words */
  overflow-wrap: break-word;   /* Standard property for breaking long words */
  max-width: 100%;             /* Ensure content doesn't overflow container */
  // Consider removing word-break: break-all unless absolutely needed
  // word-break: break-all;    /* More aggressive breaking if needed */
}

/* Specific styling for litquery code blocks */
.litquery,
.litquery code {
  white-space: pre-wrap !important;       /* Force wrap while preserving whitespace */
  word-wrap: break-word !important;       /* Break long words if necessary */
  overflow-wrap: break-word !important;   /* Modern standard property */
  overflow-x: hidden;                     /* Hide horizontal scrollbar */
  max-width: 100%;                        /* Ensure content doesn't exceed container */
}

/* If specific Quarto/cell output styling is needed beyond the base: */
/*
div.sourceCode pre.sourceCode,
.cell-output pre {
  // Add specific overrides here only if the base 'pre' style isn't sufficient
  // For example: background-color: some-other-color;
}
*/
